"use strict";(self.webpackChunkAjyal_Alquran=self.webpackChunkAjyal_Alquran||[]).push([[954],{8954:(Y,_,l)=>{l.r(_),l.d(_,{EpisodesModule:()=>Q});var p=l(6814),g=l(2129),a=l(95),e=l(4769),u=l(553),x=l(9862);let f=(()=>{class o{constructor(t){this._http=t}getAllCircle(t){return this._http.get(`${u.N.baseUrl}Circle`,{params:{PageNumber:1,pageSize:t||20}})}createCircle(t){return this._http.post(`${u.N.baseUrl}Circle/add`,t)}deleteCircle(t){return this._http.post(`${u.N.baseUrl}Circle/DeletePermanently/${t}`,{})}updateCircle(t){return this._http.post(`${u.N.baseUrl}Circle/UpdateMainData`,t)}getStudentsByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetStudentsByCircleId/${t}`)}getUnassignedStudentsByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetUnassignedStudentsByCircleId/${t}`)}updateStudents(t){return this._http.post(`${u.N.baseUrl}Circle/UpdateStudents`,t)}getManagerByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetManagerByCircleId/${t}`)}getUnassignedManagerByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetUnassignedManagerByCircleId/${t}`)}updateManagers(t){return this._http.post(`${u.N.baseUrl}Circle/UpdateManagers`,t)}getCircleTimes(t){return this._http.get(`${u.N.baseUrl}Circle/GetCircleTimes/${t}`)}getUnassignedTimesByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetUnassignedTimesByCircleId/${t}`)}updateTimes(t){return this._http.post(`${u.N.baseUrl}Circle/UpdateTimes`,t)}getUnassignedTeacherByCircleId(t){return this._http.get(`${u.N.baseUrl}Circle/GetUnassignedTeacherByCircleId/${t}`)}checkCircleAvailability(t){return this._http.post(`${u.N.baseUrl}Circle/CheckCircleAvailability/${t.circleId}/${t.teacherId}`,t)}confirmUpdateCircle(t){return this._http.post(`${u.N.baseUrl}Circle/ConfirmUpdateCircle/${t.circleId}/${t.teacherId}`,t)}static#e=this.\u0275fac=function(i){return new(i||o)(e.LFG(x.eN))};static#t=this.\u0275prov=e.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();var h=l(3785),m=l(5505),v=l(5219),C=l(9838);function T(o,d){1&o&&(e.TgZ(0,"tr")(1,"th"),e._uU(2,"\u0627\u0633\u0645 \u0627\u0644\u062d\u0644\u0642\u0629"),e.qZA(),e.TgZ(3,"th"),e._uU(4,"\u0648\u0642\u062a \u0627\u0644\u062d\u0644\u0642\u0629"),e.qZA(),e.TgZ(5,"th"),e._uU(6,"\u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646"),e.qZA(),e.TgZ(7,"th"),e._uU(8,"\u0627\u0644\u0645\u0639\u0644\u0645\u064a\u0646"),e.qZA(),e.TgZ(9,"th"),e._uU(10,"\u0627\u0644\u0637\u0644\u0627\u0628"),e.qZA(),e.TgZ(11,"th"),e._uU(12,"\u0627\u0644\u0627\u0639\u062f\u0627\u062f\u0627\u062a"),e.qZA()())}function M(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"tr")(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onShowTimes(r.id))}),e._uU(4,"\u0639\u0631\u0636 \u0627\u0644\u0627\u0648\u0642\u0627\u062a"),e.qZA(),e.TgZ(5,"td",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onShowManagers(r.id))}),e._uU(6,"\u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646"),e.qZA(),e.TgZ(7,"td",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onShowCircles(r))}),e._uU(8,"\u0627\u0644\u0645\u0639\u0644\u0645"),e.qZA(),e.TgZ(9,"td",15),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.onShowStudents(r.id))}),e._uU(10,"\u0627\u0644\u0637\u0644\u0627\u0628"),e.qZA(),e.TgZ(11,"td")(12,"div",16)(13,"button",17),e._UZ(14,"i",18),e.qZA(),e.TgZ(15,"ul",19)(16,"li")(17,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.openPopupForEdit(r))}),e._uU(18," \u062a\u0639\u062f\u064a\u0644 "),e.qZA()(),e.TgZ(19,"li")(20,"button",20),e.NdJ("click",function(){const r=e.CHM(t).$implicit,c=e.oxw();return e.KtG(c.deleteCircle(r.id))}),e._uU(21," \u062d\u0630\u0641 "),e.qZA()()()()()()}if(2&o){const t=d.$implicit;e.xp6(2),e.Oqu(t.name)}}function b(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",21)(1,"div",22)(2,"h3"),e._uU(3),e.qZA(),e.TgZ(4,"form",23),e.NdJ("ngSubmit",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.createCircle())}),e.TgZ(5,"div")(6,"label",24),e._uU(7,"\u0627\u0633\u0645 \u0627\u0644\u062d\u0644\u0642\u0629"),e.qZA(),e._UZ(8,"input",25),e.qZA(),e.TgZ(9,"div",26)(10,"button",27),e._uU(11),e.qZA(),e.TgZ(12,"button",28),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showAddUpdatePopup=!1)}),e._uU(13," \u0625\u063a\u0644\u0627\u0642 "),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(3),e.Oqu(t.isEditMode?"\u062a\u0639\u062f\u064a\u0644 \u062d\u0644\u0642\u0629":"\u0625\u0636\u0627\u0641\u0629 \u062d\u0644\u0642\u0629"),e.xp6(1),e.Q6J("formGroup",t.circleForm),e.xp6(7),e.hij(" ",t.isEditMode?"\u062a\u0639\u062f\u064a\u0644":"\u0625\u0636\u0627\u0641\u0629"," ")}}const A=function(o){return{type:"success",text:o,buttonText:"\u0639\u0631\u0636 \u0627\u0644\u062d\u0644\u0642\u0627\u062a"}};function w(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"app-sweet-alert",29),e.NdJ("confirmMessage",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.successFunction(n))}),e.qZA()}if(2&o){const t=e.oxw();e.Q6J("data",e.VKq(1,A,t.successAletMsg))}}const S=function(){return{type:"confirm",text:"\u0647\u0644 \u0623\u0646\u062a \u0645\u062a\u0623\u0643\u062f \u0645\u0646 \u062d\u0630\u0641 \u0647\u0630\u0627 \u0627\u0644\u062d\u0644\u0642\u0629",buttonText:""}};function P(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"app-sweet-alert",29),e.NdJ("confirmMessage",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.confirmFunction(n))}),e.qZA()}2&o&&e.Q6J("data",e.DdM(1,S))}const Z=function(){return{type:"warning",text:"\u0647\u0630\u0627 \u0627\u0644\u0645\u0639\u0644\u0645 \u0645\u0648\u062c\u0648\u062f \u0641\u064a \u062d\u0644\u0642\u0629 \u0627\u062e\u0631\u064a. \u0647\u0644 \u062a\u0631\u063a\u0628 \u0641\u064a \u0627\u062e\u062a\u064a\u0627\u0631 \u0647\u0630\u0627 \u0627\u0644\u0645\u0639\u0644\u0645 \u0645\u0646 \u0627\u0644\u062d\u0644\u0642\u0629 \u0627\u0644\u0627\u062e\u0631\u064a\u061f",buttonText:""}};function E(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"app-sweet-alert",29),e.NdJ("confirmMessage",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.warningFunction(n))}),e.qZA()}2&o&&e.Q6J("data",e.DdM(1,Z))}function y(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartStudent(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectStudent(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function U(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartStudent(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectStudent(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function k(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"h3"),e._uU(3,"\u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0637\u0644\u0627\u0628"),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverStudent(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropStudent(n))}),e.TgZ(6,"h4"),e._uU(7,"\u062c\u0645\u064a\u0639 \u0627\u0644\u0637\u0644\u0627\u0628"),e.qZA(),e.YNc(8,y,2,1,"div",34),e.qZA(),e.TgZ(9,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverStudent(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropStudent(n))}),e.TgZ(10,"h4"),e._uU(11,"\u0627\u0644\u0637\u0644\u0627\u0628 \u0627\u0644\u0645\u062e\u062a\u0627\u0631\u0647"),e.qZA(),e.YNc(12,U,2,1,"div",34),e.qZA()(),e.TgZ(13,"div",26)(14,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectStudentFun())}),e._uU(15,"\u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showStudentPopup=!1)}),e._uU(17,"\u0627\u0644\u063a\u0627\u0621"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.unSelectedStudent),e.xp6(4),e.Q6J("ngForOf",t.selectedStudent)}}function I(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartManager(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectManager(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function N(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartManager(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectManager(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function F(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"h3"),e._uU(3,"\u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646"),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverManager(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropManager(n))}),e.TgZ(6,"h4"),e._uU(7,"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646"),e.qZA(),e.YNc(8,I,2,1,"div",34),e.qZA(),e.TgZ(9,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverManager(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropManager(n))}),e.TgZ(10,"h4"),e._uU(11,"\u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646 \u0627\u0644\u0645\u062e\u062a\u0627\u0631\u0647"),e.qZA(),e.YNc(12,N,2,1,"div",34),e.qZA()(),e.TgZ(13,"div",26)(14,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectManagerFun())}),e._uU(15,"\u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showManagerPopup=!1)}),e._uU(17,"\u0627\u0644\u063a\u0627\u0621"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.unSelectedManager),e.xp6(4),e.Q6J("ngForOf",t.selectedManager)}}function J(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartTime(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectTime(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function D(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStartTime(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectTime(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.name," ")}}function G(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"h3"),e._uU(3,"\u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverTime(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropTime(n))}),e.TgZ(6,"h4"),e._uU(7,"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f"),e.qZA(),e.YNc(8,J,2,1,"div",34),e.qZA(),e.TgZ(9,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOverTime(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDropTime(n))}),e.TgZ(10,"h4"),e._uU(11,"\u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0627\u0644\u0645\u062e\u062a\u0627\u0631\u0647"),e.qZA(),e.YNc(12,D,2,1,"div",34),e.qZA()(),e.TgZ(13,"div",26)(14,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectTimeFun())}),e._uU(15,"\u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showTimePopup=!1)}),e._uU(17,"\u0627\u0644\u063a\u0627\u0621"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.unSelectedTime),e.xp6(4),e.Q6J("ngForOf",t.selectedTime)}}function $(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.onDragStart(r))})("dblclick",function(){const r=e.CHM(t).$implicit,c=e.oxw(2);return e.KtG(c.doubleClickToSelectCircle(r))}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function q(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",35),e.NdJ("dragstart",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.onDragStart(n.selectedTeachers))})("dblclick",function(){e.CHM(t);const n=e.oxw(2);return e.KtG(n.selectedTeachers=[])}),e._uU(1),e.qZA()}if(2&o){const t=d.$implicit;e.xp6(1),e.hij(" ",t.fullName," ")}}function K(o,d){if(1&o){const t=e.EpF();e.TgZ(0,"div",30)(1,"div",31)(2,"h3"),e._uU(3,"\u0627\u062e\u062a\u0627\u0631 \u0627\u0644\u0645\u0639\u0644\u0645"),e.qZA(),e.TgZ(4,"div",32)(5,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOver(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDrop(n))}),e.TgZ(6,"h4"),e._uU(7,"\u062c\u0645\u064a\u0639 \u0627\u0644\u0645\u0639\u0644\u0645\u064a\u0646"),e.qZA(),e.YNc(8,$,2,1,"div",34),e.qZA(),e.TgZ(9,"div",33),e.NdJ("dragover",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDragOver(n))})("drop",function(n){e.CHM(t);const r=e.oxw();return e.KtG(r.onDrop(n))}),e.TgZ(10,"h4"),e._uU(11,"\u0627\u0644\u0645\u0639\u0644\u0645 \u0627\u0644\u0645\u062e\u062a\u0627\u0631"),e.qZA(),e.YNc(12,q,2,1,"div",34),e.qZA()(),e.TgZ(13,"div",26)(14,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectedTeacherFun())}),e._uU(15,"\u062a\u0639\u062f\u064a\u0644"),e.qZA(),e.TgZ(16,"button",7),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.showTeachersPopup=!1)}),e._uU(17,"\u0627\u0644\u063a\u0627\u0621"),e.qZA()()()()}if(2&o){const t=e.oxw();e.xp6(8),e.Q6J("ngForOf",t.unSelectedTeachers),e.xp6(4),e.Q6J("ngForOf",t.selectedTeachers)}}const H=function(){return{"min-width":"50rem"}},B=[{path:"",component:(()=>{class o{constructor(t,i){this._circlesService=t,this._fb=i,this.isEditMode=!1,this.circles=[],this.showCircleTime=!1,this.showAddUpdatePopup=!1,this.circleForm=this._fb.group({name:["",a.kI.required]}),this.successAletMsg="",this.successAlert=!1,this.confirmAlert=!1,this.circleTimes=[],this.circleFilter=[],this.showStudentPopup=!1,this.showManagerPopup=!1,this.showTimePopup=!1,this.showTeachersPopup=!1,this.selectedTeachers=[],this.teacherObj={},this.warningAlert=!1}successFunction(t){t&&(this.successAlert=!1,this.getAllCircle())}confirmFunction(t){t?(this.confirmAlert=!1,this._circlesService.deleteCircle(this.deleteCircleId).subscribe(i=>{this.successAlert=!0,this.successAletMsg="\u062a\u0645 \u062d\u0630\u0641 \u0627\u0644\u062d\u0644\u0642\u0629 \u0628\u0646\u062c\u0627\u062d",this.getAllCircle()})):this.confirmAlert=!1}onPagePagination(){this.getAllCircle()}getAllCircle(){this._circlesService.getAllCircle(this.totalCount).subscribe(t=>{this.circles=t.items,this.circleFilter=this.circles})}searchCirclesByWord(t){this.circleFilter=t?this.circles.filter(i=>i.name.includes(t)):this.circles}createCircle(){this.isEditMode?this._circlesService.updateCircle({id:this.editId,name:this.circleForm.value.name}).subscribe(i=>{this.getAllCircle(),this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u062d\u0644\u0642\u0629 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0,this.circleForm.reset(),this.showAddUpdatePopup=!1}):this._circlesService.createCircle(this.circleForm.value).subscribe(i=>{this.getAllCircle(),this.successAletMsg="\u062a\u0645 \u0625\u0636\u0627\u0641\u0629 \u0627\u0644\u062d\u0644\u0642\u0629 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0,this.circleForm.reset(),this.showAddUpdatePopup=!1})}deleteCircle(t){this.deleteCircleId=t,this.confirmAlert=!0}openPopupForAdd(){this.isEditMode=!1,this.showAddUpdatePopup=!0}openPopupForEdit(t){this.isEditMode=!0,this.showAddUpdatePopup=!0,this.editId=t.id,this.circleForm.patchValue({name:t.name})}ngOnInit(){this.getAllCircle()}onShowStudents(t){this.circleId=t,this.showStudentPopup=!0,this.getUnassignedStudentsByCircleId(),this.getStudentsByCircleId()}getUnassignedStudentsByCircleId(){this._circlesService.getUnassignedStudentsByCircleId(this.circleId).subscribe(t=>{this.unSelectedStudent=t.items})}getStudentsByCircleId(){this._circlesService.getStudentsByCircleId(this.circleId).subscribe(t=>{this.selectedStudent=t.items})}onDragStartStudent(t){this.currentStudent=t}onDropStudent(t){t.preventDefault();const i=this.unSelectedStudent.find(s=>s.id==this.currentStudent.id),n=this.unSelectedStudent.findIndex(s=>s.id==this.currentStudent.id),r=this.selectedStudent.find(s=>s.id==this.currentStudent.id),c=this.selectedStudent.findIndex(s=>s.id==this.currentStudent.id);null!=i?(this.unSelectedStudent.splice(n,1),this.selectedStudent.push(i)):(this.selectedStudent.splice(c,1),this.unSelectedStudent.push(r)),this.currentStudent=null}onDragOverStudent(t){t.preventDefault()}doubleClickToSelectStudent(t){const i=this.unSelectedStudent.find(s=>s.id==t.id),n=this.unSelectedStudent.findIndex(s=>s.id==t.id),r=this.selectedStudent.find(s=>s.id==t.id),c=this.selectedStudent.findIndex(s=>s.id==t.id);null!=i?(this.unSelectedStudent.splice(n,1),this.selectedStudent.push(i)):(this.selectedStudent.splice(c,1),this.unSelectedStudent.push(r)),t=null}selectStudentFun(){const t=this.selectedStudent.map(n=>({id:n.id}));this._circlesService.updateStudents({circleId:this.circleId,students:t}).subscribe(n=>{this.showStudentPopup=!1,this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0637\u0644\u0627\u0628 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0})}onShowManagers(t){this.circleId=t,this.showManagerPopup=!0,this.getUnassignedManagerByCircleId(),this.getManagerByCircleId()}getUnassignedManagerByCircleId(){this._circlesService.getUnassignedManagerByCircleId(this.circleId).subscribe(t=>{this.unSelectedManager=t.items})}getManagerByCircleId(){this._circlesService.getManagerByCircleId(this.circleId).subscribe(t=>{this.selectedManager=t.items})}onDragStartManager(t){this.currentManager=t}onDropManager(t){t.preventDefault();const i=this.unSelectedManager.find(s=>s.id==this.currentManager.id),n=this.unSelectedManager.findIndex(s=>s.id==this.currentManager.id),r=this.selectedManager.find(s=>s.id==this.currentManager.id),c=this.selectedManager.findIndex(s=>s.id==this.currentManager.id);null!=i?(this.unSelectedManager.splice(n,1),this.selectedManager.push(i)):(this.selectedManager.splice(c,1),this.unSelectedManager.push(r)),this.currentStudent=null}onDragOverManager(t){t.preventDefault()}doubleClickToSelectManager(t){const i=this.unSelectedManager.find(s=>s.id==t.id),n=this.unSelectedManager.findIndex(s=>s.id==t.id),r=this.selectedManager.find(s=>s.id==t.id),c=this.selectedManager.findIndex(s=>s.id==t.id);null!=i?(this.unSelectedManager.splice(n,1),this.selectedManager.push(i)):(this.selectedManager.splice(c,1),this.unSelectedManager.push(r)),t=null}selectManagerFun(){const t=this.selectedManager.map(n=>({managerId:n.id}));this._circlesService.updateManagers({id:this.circleId,circleManagers:t}).subscribe(n=>{this.showManagerPopup=!1,this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0634\u0631\u0641\u064a\u0646 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0})}onShowTimes(t){this.circleId=t,this.showTimePopup=!0,this.getUnassignedTimesByCircleId(),this.getCircleTimes()}getUnassignedTimesByCircleId(){this._circlesService.getUnassignedTimesByCircleId(this.circleId).subscribe(t=>{this.unSelectedTime=t})}getCircleTimes(){this._circlesService.getCircleTimes(this.circleId).subscribe(t=>{this.selectedTime=t})}onDragStartTime(t){this.currentTime=t}onDropTime(t){t.preventDefault();const i=this.unSelectedTime.find(s=>s.id==this.currentTime.id),n=this.unSelectedTime.findIndex(s=>s.id==this.currentTime.id),r=this.selectedTime.find(s=>s.id==this.currentTime.id),c=this.selectedTime.findIndex(s=>s.id==this.currentTime.id);null!=i?(this.unSelectedTime.splice(n,1),this.selectedTime.push(i)):(this.selectedTime.splice(c,1),this.unSelectedTime.push(r)),this.currentTime=null}onDragOverTime(t){t.preventDefault()}doubleClickToSelectTime(t){const i=this.unSelectedTime.find(s=>s.id==t.id),n=this.unSelectedTime.findIndex(s=>s.id==t.id),r=this.selectedTime.find(s=>s.id==t.id),c=this.selectedTime.findIndex(s=>s.id==t.id);null!=i?(this.unSelectedTime.splice(n,1),this.selectedTime.push(i)):(this.selectedTime.splice(c,1),this.unSelectedTime.push(r)),t=null}selectTimeFun(){const t=this.selectedTime.map(n=>({timeId:n.id}));this._circlesService.updateTimes({circleId:this.circleId,circleTimes:t}).subscribe(n=>{this.showTimePopup=!1,this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0648\u0627\u0639\u064a\u062f \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0})}onShowCircles(t){this.teacherId=t.id,this.showTeachersPopup=!0,this.getUnassignedTeacherByCircleId(),this.GetTeacherByCircleId(t.teacher)}getUnassignedTeacherByCircleId(){this._circlesService.getUnassignedTeacherByCircleId(this.teacherId).subscribe(t=>{this.unSelectedTeachers=t.items})}GetTeacherByCircleId(t){t?(this.selectedTeachers=[],this.selectedTeachers.push(t)):this.selectedTeachers=[]}onDragStart(t){this.currentTeacher=t}onDrop(t){t.preventDefault();const i=this.unSelectedTeachers.find(s=>s.id==this.currentTeacher.id);this.unSelectedTeachers.findIndex(s=>s.id==this.currentTeacher.id),this.selectedTeachers.find(s=>s.id==this.currentTeacher.id),this.selectedTeachers.findIndex(s=>s.id==this.currentTeacher.id),null!=i&&(this.selectedTeachers=[],this.selectedTeachers.push(i)),this.currentTeacher=null}onDragOver(t){t.preventDefault()}doubleClickToSelectCircle(t){const i=this.unSelectedTeachers.find(s=>s.id==t.id);this.unSelectedTeachers.findIndex(s=>s.id==t.id),this.selectedTeachers.find(s=>s.id==t.id),this.selectedTeachers.findIndex(s=>s.id==t.id),null!=i&&(this.selectedTeachers=[],this.selectedTeachers.push(i)),t=null}selectedTeacherFun(){this.teacherObj={circleId:this.teacherId,teacherId:this.selectedTeachers[0].id},this._circlesService.checkCircleAvailability(this.teacherObj).subscribe(()=>{this._circlesService.confirmUpdateCircle(this.teacherObj).subscribe(i=>{this.showTeachersPopup=!1,this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0639\u0644\u0645 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0})},i=>{this.warningAlert=!0})}warningFunction(t){t?this._circlesService.confirmUpdateCircle(this.teacherObj).subscribe(i=>{this.showTeachersPopup=!1,this.warningAlert=!1,this.successAletMsg="\u062a\u0645 \u062a\u0639\u062f\u064a\u0644 \u0627\u0644\u0645\u0639\u0644\u0645 \u0628\u0646\u062c\u0627\u062d",this.successAlert=!0,this.getAllCircle()}):this.warningAlert=!1}static#e=this.\u0275fac=function(i){return new(i||o)(e.Y36(f),e.Y36(a.qu))};static#t=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-episodes"]],decls:21,vars:16,consts:[[3,"title"],[1,"searchItem"],[1,"search"],[1,"fa-solid","fa-magnifying-glass"],["type","text","placeholder","\u0627\u0628\u062d\u062b \u0647\u0646\u0627...",3,"keyup"],["searchValue",""],[1,"addBtn"],[3,"click"],[1,"fa-solid","fa-plus"],[3,"value","paginator","pageLinks","rows","showCurrentPageReport","tableStyle","onPage"],["pTemplate","header"],["pTemplate","body"],["class","add-update-ovverlay",4,"ngIf"],[3,"data","confirmMessage",4,"ngIf"],["class","circle-layout",4,"ngIf"],[1,"open",3,"click"],[1,"dropdown"],["type","button","id","dropdownMenuButton1","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-button"],[1,"fa-solid","fa-ellipsis"],["aria-labelledby","dropdownMenuButton1",1,"dropdown-menu"],[1,"dropdown-item",3,"click"],[1,"add-update-ovverlay"],[1,"add-update-popup"],[3,"formGroup","ngSubmit"],["for","name"],["type","text","formControlName","name","placeholder","\u0623\u062f\u062e\u0644 \u0627\u0633\u0645 \u0627\u0644\u062d\u0644\u0642\u0629"],[1,"btns"],["type","submit",1,"add"],[1,"close",3,"click"],[3,"data","confirmMessage"],[1,"circle-layout"],[1,"circle-popup"],[1,"items"],[1,"box",3,"dragover","drop"],["class","item","draggable","true",3,"dragstart","dblclick",4,"ngFor","ngForOf"],["draggable","true",1,"item",3,"dragstart","dblclick"]],template:function(i,n){if(1&i){const r=e.EpF();e._UZ(0,"app-breadcrumb",0),e.TgZ(1,"div",1)(2,"div",2),e._UZ(3,"i",3),e.TgZ(4,"input",4,5),e.NdJ("keyup",function(){e.CHM(r);const s=e.MAs(5);return e.KtG(n.searchCirclesByWord(s.value))}),e.qZA()(),e.TgZ(6,"div",6)(7,"button",7),e.NdJ("click",function(){return n.openPopupForAdd()}),e._UZ(8,"i",8),e._uU(9," \u0627\u0636\u0627\u0641\u0629 \u062d\u0644\u0642\u0629 "),e.qZA()()(),e.TgZ(10,"p-table",9),e.NdJ("onPage",function(){return n.onPagePagination()}),e.YNc(11,T,13,0,"ng-template",10),e.YNc(12,M,22,1,"ng-template",11),e.qZA(),e.YNc(13,b,14,3,"div",12),e.YNc(14,w,1,3,"app-sweet-alert",13),e.YNc(15,P,1,2,"app-sweet-alert",13),e.YNc(16,E,1,2,"app-sweet-alert",13),e.YNc(17,k,18,2,"div",14),e.YNc(18,F,18,2,"div",14),e.YNc(19,G,18,2,"div",14),e.YNc(20,K,18,2,"div",14)}2&i&&(e.Q6J("title","\u0627\u0644\u062d\u0644\u0642\u0627\u062a"),e.xp6(10),e.Q6J("value",n.circleFilter)("paginator",!0)("pageLinks",3)("rows",10)("showCurrentPageReport",!1)("tableStyle",e.DdM(15,H)),e.xp6(3),e.Q6J("ngIf",n.showAddUpdatePopup),e.xp6(1),e.Q6J("ngIf",n.successAlert),e.xp6(1),e.Q6J("ngIf",n.confirmAlert),e.xp6(1),e.Q6J("ngIf",n.warningAlert),e.xp6(1),e.Q6J("ngIf",n.showStudentPopup),e.xp6(1),e.Q6J("ngIf",n.showManagerPopup),e.xp6(1),e.Q6J("ngIf",n.showTimePopup),e.xp6(1),e.Q6J("ngIf",n.showTeachersPopup))},dependencies:[p.sg,p.O5,h.L,m.iA,v.jx,C.h,a._Y,a.Fj,a.JJ,a.JL,a.sg,a.u],styles:["[_nghost-%COMP%]     .p-datatable{margin:10px;border-top-right-radius:10px;border-top-left-radius:10px;border:1px solid var(--text-color);border-top:0px;overflow:hidden}[_nghost-%COMP%]     .p-datatable td{padding:10px}[_nghost-%COMP%]     .p-datatable tr:not(:last-child){border-bottom:1px solid rgba(1,86,60,.1529411765)}[_nghost-%COMP%]     th{padding:10px;background-color:#00cc85;color:var(--text-color);text-align:center;border-top:1px solid var(--text-color)}[_nghost-%COMP%]     td{text-align:center}  .p-menu-overlay{width:-moz-fit-content;width:fit-content}  .p-menu-overlay .p-menuitem-content{color:#707070b2}  .p-menu-overlay .p-menuitem-text{display:block}[_nghost-%COMP%]     .p-paginator-element{background:var(--text-color);color:var(--bg-color);border-radius:50%;margin:1px}[_nghost-%COMP%]     .p-paginator-last, [_nghost-%COMP%]     .p-paginator-next, [_nghost-%COMP%]     .p-paginator-first, [_nghost-%COMP%]     .p-paginator-prev{color:#00cc85;background-color:var(--bg-color)!important;transform:rotate(180deg);border:1px solid #00cc85;min-width:2rem;height:2rem;border-radius:50%}[_nghost-%COMP%]     .p-highlight{background-color:#00cc85}[_nghost-%COMP%]     .p-link{min-width:2rem;height:2rem}.userColors_1[_ngcontent-%COMP%]{background-color:#1aaa5540;color:#1aaa55}.userColors_2[_ngcontent-%COMP%]{background-color:#ff950040;color:#ff9500}.userColors_3[_ngcontent-%COMP%]{background-color:#24c0db40;color:#24c0db}.userColors_4[_ngcontent-%COMP%]{background-color:#a860e340;color:#bc79f1}.userColors_5[_ngcontent-%COMP%]{background-color:#fd612f40;color:#fd612f}  ::-webkit-scrollbar-thumb{background-color:#00cc85;border-radius:5px}  ::-webkit-scrollbar{height:4px;width:4px}  ::-webkit-scrollbar-track{background:transparent}  .p-paginator.p-component.ng-star-inserted{margin-top:20px}  .ng-star-inserted{background-color:var(--bg-color);color:var(--text-color)}.searchItem[_ngcontent-%COMP%]{margin-bottom:20px;display:flex;justify-content:space-between;align-items:center;padding:0 20px}.searchItem[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]{position:relative}.searchItem[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:13px;right:10px}.searchItem[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{background-color:var(--bg-color);width:400px;height:40px;padding:0 30px;border-radius:20px;border:2px solid #00cc85;outline:none}.searchItem[_ngcontent-%COMP%]   .addBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:10px;border-radius:6px;border:none;cursor:pointer;background-color:#00cc85;color:var(--text-color);font-weight:700}.searchItem[_ngcontent-%COMP%]   .addBtn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:10px}@media (max-width: 768px){.searchItem[_ngcontent-%COMP%]{flex-direction:column;align-items:start;gap:10px}.searchItem[_ngcontent-%COMP%]   .search[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%}}td[_ngcontent-%COMP%]{min-width:150px}td.open[_ngcontent-%COMP%]{font-weight:700;cursor:pointer}td.open[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{background-color:#00cc85;padding:2px 5px;border-radius:5px;font-size:10px;margin:0}td.open[_ngcontent-%COMP%]:hover{background-color:#00cc85;width:-moz-fit-content;width:fit-content}td.open[_ngcontent-%COMP%]:hover   span[_ngcontent-%COMP%]{background-color:#fff;padding:2px 5px;border-radius:5px}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:4px 8px;margin-left:2px;color:#fff;font-size:12px}td[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{margin-left:2px}.password-show[_ngcontent-%COMP%]{position:relative}.password-show[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:absolute;top:10px;left:10px;color:#00cc85;cursor:pointer}button[_ngcontent-%COMP%]:disabled{cursor:not-allowed}  .p-datatable-wrapper{min-height:400px}#dropdownMenuButton1[_ngcontent-%COMP%]{background-color:transparent;color:#00cc85;font-size:24px}.dropdown-menu[_ngcontent-%COMP%]{background-color:var(--bg-color);border:1px solid var(--text-color)}.dropdown-menu[_ngcontent-%COMP%]   .dropdown-item[_ngcontent-%COMP%]{color:#00cc85!important;font-size:14px!important;font-weight:700!important;text-align:right!important}.display-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#707070b2;z-index:10000}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]{background-color:var(--bg-color);padding:20px;border-radius:10px;min-width:500px}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]{width:100%}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%], .display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{border:1px solid #dddddd;padding:8px}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{padding:20px 0 0;text-align:left}.display-overlay[_ngcontent-%COMP%]   .display-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 20px;border:none;background-color:#00cc85;border-radius:5px;font-weight:700;color:var(--text-color)}.add-update-ovverlay[_ngcontent-%COMP%]{position:fixed;inset:0;display:flex;justify-content:center;align-items:center;background-color:#707070b2;z-index:10000}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]{background-color:var(--bg-color);padding:20px;border-radius:10px;min-width:500px}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;color:var(--text-color)}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid var(--text-color);border-radius:5px;margin-bottom:20px}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]{text-align:left}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:7px 20px;border:none;border-radius:5px;font-weight:700;color:var(--text-color)}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .add[_ngcontent-%COMP%]{background-color:#00cc85}.add-update-ovverlay[_ngcontent-%COMP%]   .add-update-popup[_ngcontent-%COMP%]   .btns[_ngcontent-%COMP%]   .close[_ngcontent-%COMP%]{margin-right:5px}"]})}return o})()}];let j=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(B),g.Bz]})}return o})(),Q=(()=>{class o{static#e=this.\u0275fac=function(i){return new(i||o)};static#t=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[p.ez,j,h.L,m.U$,C.h,a.UX]})}return o})()}}]);