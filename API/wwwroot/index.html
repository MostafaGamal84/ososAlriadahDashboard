<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Auction Management</title>
  <link rel="stylesheet" href="css/styles.css" />
</head>
<body>
  <header>
    <h1>Auction Management</h1>
    <p>Use this page to add, update, and delete auctions stored in SQL Server.</p>
  </header>

  <main>
    <section class="card">
      <h2>Add a New Auction</h2>
      <form id="addAuctionForm" enctype="multipart/form-data">
        <div class="form-grid">
          <label>
            Name
            <input type="text" name="Name" required />
          </label>
          <label>
            Start date and time
            <input type="datetime-local" name="Start" required />
          </label>
          <label>
            End date and time
            <input type="datetime-local" name="End" required />
          </label>
          <label>
            Opening price
            <input type="number" name="OpeningPrice" min="0" step="0.01" />
          </label>
          <label>
            Agent name
            <input type="text" name="AgentName" />
          </label>
          <label>
            District
            <input type="text" name="District" />
          </label>
          <label>
            City
            <input type="text" name="City" />
          </label>
          <label>
            External URL
            <input type="url" name="Url" />
          </label>
          <label class="full-width">
            Description
            <textarea name="Content" rows="3"></textarea>
          </label>
          <label class="full-width">
            Image file
            <input type="file" name="ImageFile" accept="image/*" />
          </label>
        </div>
        <div class="actions">
          <button type="submit">Add Auction</button>
        </div>
      </form>
    </section>

    <section class="card" id="editSection" hidden>
      <div class="card-header">
        <h2>Edit Auction</h2>
        <button type="button" id="cancelEdit" class="secondary">Cancel</button>
      </div>
      <form id="editAuctionForm" enctype="multipart/form-data">
        <input type="hidden" name="Id" id="editAuctionId" />
        <div class="form-grid">
          <label>
            Name
            <input type="text" name="Name" id="editName" required />
          </label>
          <label>
            Start date and time
            <input type="datetime-local" name="Start" id="editStart" required />
          </label>
          <label>
            End date and time
            <input type="datetime-local" name="End" id="editEnd" required />
          </label>
          <label>
            Opening price
            <input type="number" name="OpeningPrice" id="editOpeningPrice" min="0" step="0.01" />
          </label>
          <label>
            Agent name
            <input type="text" name="AgentName" id="editAgentName" />
          </label>
          <label>
            District
            <input type="text" name="District" id="editDistrict" />
          </label>
          <label>
            City
            <input type="text" name="City" id="editCity" />
          </label>
          <label>
            External URL
            <input type="url" name="Url" id="editUrl" />
          </label>
          <label class="full-width">
            Description
            <textarea name="Content" id="editContent" rows="3"></textarea>
          </label>
          <label class="full-width">
            Replace image
            <input type="file" name="ImageFile" accept="image/*" />
          </label>
        </div>
        <div class="actions">
          <button type="submit">Update Auction</button>
        </div>
      </form>
    </section>

    <section class="card">
      <div class="card-header">
        <h2>Existing Auctions</h2>
        <button type="button" id="refreshButton" class="secondary">Refresh</button>
      </div>
      <div class="table-wrapper">
        <table>
          <thead>
            <tr>
              <th>Name</th>
              <th>Start</th>
              <th>End</th>
              <th>Price</th>
              <th>Agent</th>
              <th>City</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody id="auctionsTableBody">
            <tr>
              <td colspan="7" class="empty">Loading auctionsâ€¦</td>
            </tr>
          </tbody>
        </table>
      </div>
    </section>
  </main>

  <div id="notifications" aria-live="polite"></div>

  <script type="module" src="js/auction.js"></script>
</body>
</html>
